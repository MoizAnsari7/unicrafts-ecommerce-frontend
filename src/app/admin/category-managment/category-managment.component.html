<div class="container-fluid py-4 category-management">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary">Category Management</h2>
    <button
      class="btn btn-success fw-bold"
      data-bs-toggle="modal"
      data-bs-target="#categoryModal"
      (click)="openAddCategoryModal()"
    >
      <i class="bi bi-plus-circle"></i> Add Category
    </button>
  </div>

  <!-- Table -->
  <div class="table-responsive shadow rounded">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th style="width: 5%;">#</th>
          <th style="width: 70%;">Category Name</th>
          <th style="width: 25%;" class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let category of categories; let i = index" class="align-middle">
          <td>{{ i + 1 }}</td>
          <td>{{ category.name }}</td>
          <td class="text-center">
            <button
              class="btn btn-primary btn-sm me-2"
              data-bs-toggle="modal"
              data-bs-target="#categoryModal"
              (click)="openEditCategoryModal(category)"
            >
              <i class="bi bi-pencil"></i> Edit
            </button>
            <button class="btn btn-danger btn-sm" (click)="deleteCategory(category._id)">
              <i class="bi bi-trash"></i> Delete
            </button>
          </td>
        </tr>
        <tr *ngIf="!categories.length">
          <td colspan="3" class="text-center text-muted">No categories found.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal -->
  <div
    class="modal fade"
    id="categoryModal"
    tabindex="-1"
    aria-labelledby="categoryModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">{{ isEdit ? 'Edit Category' : 'Add Category' }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="categoryForm" (ngSubmit)="saveCategory()">
            <div class="mb-3">
              <label for="name" class="form-label fw-bold">Category Name</label>
              <input
                type="text"
                id="name"
                formControlName="name"
                class="form-control"
                [ngClass]="{
                  'is-invalid': categoryForm.get('name')?.invalid && categoryForm.get('name')?.touched
                }"
                placeholder="Enter category name"
              />
              <div
                *ngIf="categoryForm.get('name')?.invalid && categoryForm.get('name')?.touched"
                class="invalid-feedback"
              >
                Category name is required and should be at least 3 characters.
              </div>
            </div>
            <div class="text-end">
              <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">
                Cancel
              </button>
              <button
                type="submit"
                class="btn btn-primary fw-bold"
                [disabled]="categoryForm.invalid"
              >
                {{ isEdit ? 'Update' : 'Save' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
