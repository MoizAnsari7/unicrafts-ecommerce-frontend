<div class="container py-5">
  <div class="row">



    <!-- Filters Sidebar -->
    <div class="col-lg-3 col-md-4 mb-4">
      <div class="filters">
        <h5 class="fw-bold">Filters</h5>
        <div class="mb-3">
          <h6 class="text-muted">Order Status</h6>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="onTheWay" />
            <label class="form-check-label" for="onTheWay">On the way</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="delivered" />
            <label class="form-check-label" for="delivered">Delivered</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="cancelled" />
            <label class="form-check-label" for="cancelled">Cancelled</label>
          </div>
        </div>
        <div class="mb-3">
          <h6 class="text-muted">Order Time</h6>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="last30Days" />
            <label class="form-check-label" for="last30Days">Last 30 days</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Orders List -->
    <div class="col-lg-9 col-md-8">
        <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="text-center my-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  
      <div class="orders-container">
        <div *ngFor="let order of orders" class="order-item">
          <div class="row">
            <!-- Order Image -->
            <div class="col-4 order-image-col">
              <div class="order-image">
                <img [src]="'http://localhost:3000/' + order.items[0].productId.images[0]" alt="Product Image" class="img-fluid" />
              </div>
            </div>

            <!-- Order Details -->
            <div class="col-8">
              <div class="order-details">
                <div class="product-name">{{ order.items[0].productId.name }} <small>({{order.items[0].quantity}}*{{order.items[0].productId.price }})</small></div>
                <div class="product-price">â‚¹{{ order.total }}</div>
                <div class="order-status">
                  <span class="place-dot"></span>
                  Placed on {{ order.createdAt | date: 'medium' }}
                </div>
                <div class="order-status">
                  <span class="status-dot"></span>
                  {{ order.status }} on {{ order.updatedAt | date: 'medium' }}
                </div>
                <div class="order-actions mt-4 mb-2 d-flex justify-content-start align-items-center gap-3 flex-nowrap">
                  <button class="rate-button px-4 py-2">Rate & Review Product</button>
                  <button class="cancel-button px-4 py-2 text-end" (click)="cancelOrder(order._id)">
                    Cancel Order
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- No Orders Message -->
      <ng-template #noOrders>
        <div class="text-center">
          <p class="text-muted fs-4">You have no orders yet.</p>
          <a routerLink="/products" class="btn btn-primary btn-lg">Start Shopping</a>
        </div>
      </ng-template>
    </div>
  </div>
</div>
